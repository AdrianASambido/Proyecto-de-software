{% macro render_form(action, method="post", fields=[], submit_text="Enviar") %}
<form action="{{ action }}" method="{{ method }}" class="bg-white shadow-md rounded-lg p-6 max-w-md">
  {% for field in fields %}
    <div class="mb-4">
      <label for="{{ field.name }}" class="block text-sm font-medium text-gray-700 mb-1">
        {{ field.label }}
      </label>
     {% if field.type == "select" %}
      <select id="{{ field.name }}" name="{{ field.name }}"
              class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none"
              {% if field.required %}required{% endif %}>
        {% for option in field.options %}
          <option value="{{ option.value }}">{{ option.label }}</option>
        {% endfor %}
      </select>
    {% else %}
      <input 
        type="{{ field.type }}" 
        id="{{ field.name }}" 
        name="{{ field.name }}" 
        placeholder="{{ field.placeholder | default('') }}" 
        value="{{ field.value | default('') }}"
        class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none"
        {% if field.required %}required{% endif %}
      >
    {% endif %}
    </div>
  {% endfor %}

  {% if caller %}{{ caller() }}{% endif %}
  
  <button type="submit" class="w-full bg-gray-900 text-white py-2 px-4 rounded-lg hover:bg-gray-700">
    {{ submit_text }}
  </button>
</form>
{% endmacro %}
